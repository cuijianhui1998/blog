{% extends 'base.html' %}
{% import 'macro/person.html' as follow %}
{% from 'macro/comment.html' import comment %}

{% block errorStyle %}{% endblock %}
{% block mystyle %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static',filename='css/mine/say_me.css') }}">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/mine/detail.css') }}">
    <script src="{{ url_for('static',filename='js/run_prettify.js') }}"></script>
{% endblock %}

{% block content %}
<article>
  <h1 class="t_nav"><span>您现在的位置是：首页 > {{ blog.select }}</span><a href="/" class="n1">网站首页</a><a href="#" class="n2">{{ blog.select }}</a></h1>
  <div class="infosbox">
    <div class="newsview">
      <h3 class="news_title">{{ blog.title }}</h3>
      <div class="bloginfo">
        <ul>
          <li class="author"><a href="/">{{ blog.author }}</a></li>
          <li class="lmname"><a href="/">{{ blog.select }}</a></li>
          <li class="timer">{{ blog.create_time }}</li>
          <li class="view">4567已阅读</li>
          <li class="like">8888888</li>
        </ul>
      </div>
      <div class="tags"><a href="/" target="_blank">个人博客</a> &nbsp <a href="/" target="_blank">小世界</a></div>
      <div class="news_about"><strong>{{ tips[0] }}:</strong>{{ tips[1] }}</div>

      <div class="news_con">
          <div class="code-color" id="upcode">
              {{ blog.body_html | safe }}
          </div>
          <script type="text/javascript">
              $(document).ready(function () {
                  $("#upcode pre").addClass("linenums")
              })
          </script>
      </div>
    </div>

    <div class="share">
        <p class="diggit" onmouseover="mouseShape()"> 很赞哦！ (<span id="diggnum"></span>)</p>
        <script type="text/javascript">
            function mouseShape() {
                $(".diggit").css("cursor","pointer");
            }
        </script>
      <p class="dasbox"><a href="javascript:void(0)" onClick="dashangToggle()" class="dashang" title="打赏，支持一下">打赏本站</a></p>
      <div class="hide_box"></div>
      <div class="shang_box"> <a class="shang_close" href="javascript:void(0)" onclick="dashangToggle()" title="关闭">关闭</a>
        <div class="shang_tit">
          <p>感谢您的支持，我会继续努力的!</p>
        </div>
        <div class="shang_payimg"> <img src="{{ url_for('static',filename='images/alipayimg.jpg') }}" alt="扫码支持" title="扫一扫"> </div>
        <div class="pay_explain">扫码打赏，你说多少就多少</div>
        <div class="shang_payselect">
          <div class="pay_item checked" data-id="alipay"> <span class="radiobox"></span> <span class="pay_logo"><img src="{{ url_for('static',filename='images/alipay.jpg')}}" alt="支付宝"></span> </div>
          <div class="pay_item" data-id="weipay"> <span class="radiobox"></span> <span class="pay_logo"><img src="{{ url_for('static',filename='images/wechat.jpg')}}" alt="微信"></span> </div>
        </div>
        <script type="text/javascript">
    $(function(){
    	$(".pay_item").click(function(){
    		$(this).addClass('checked').siblings('.pay_item').removeClass('checked');
    		var dataid=$(this).attr('data-id');
    		$(".shang_payimg img").attr("src","static/images/"+dataid+"ing.jpg");
    		$("#shang_pay_txt").text(dataid=="alipay"?"支付宝":"微信");
    	});
    });
    function dashangToggle(){
    	$(".hide_box").fadeToggle();
    	$(".shang_box").fadeToggle();
    }
    </script> 
      </div>
    </div>

    <div class="nextinfo">
      <p>上一篇：<a href="/">作为一个设计师,如果遭到质疑你是否能恪守自己的原则?</a></p>
      <p>下一篇：<a href="/">返回列表</a></p>
    </div>
    <div class="otherlink">
      <h2>相关文章</h2>
      <ul>
        <li><a href="/" title="html5个人博客模板《黑色格调》">html5个人博客模板《黑色格调》</a></li>
        <li><a href="/" title="html5个人博客模板主题《清雅》">html5个人博客模板主题《清雅》</a></li>
        <li><a href="/" title="html5个人博客模板主题《绅士》">html5个人博客模板主题《绅士》</a></li>
        <li><a href="/" title="html5时尚个人博客模板-技术门户型">html5时尚个人博客模板-技术门户型</a></li>
        <li><a href="/" title="html5个人博客模板主题《心蓝时间轴》">html5个人博客模板主题《心蓝时间轴》</a></li>
        <li><a href="/" title="古典个人博客模板《江南墨卷》">古典个人博客模板《江南墨卷》</a></li>
        <li><a href="/" title="古典风格-个人博客模板">古典风格-个人博客模板</a></li>
        <li><a href="/" title="个人博客《草根寻梦》—手机版模板">个人博客《草根寻梦》—手机版模板</a></li>
        <li><a href="/" title="【活动作品】柠檬绿兔小白个人博客模板">【活动作品】柠檬绿兔小白个人博客模板</a></li>
        <li><a href="/" title="【匆匆那些年】总结个人博客经历的这四年…">【匆匆那些年】总结个人博客经历的这四年…</a></li>
      </ul>
    </div>
    {{ comment(blog,comments,pageinations) }}
  </div>

  <div class="sidebar">
    <div class="zhuanti">
      <h2 class="hometitle">特别推荐</h2>
      <ul>
        <li> <i><img src="{{ url_for('static',filename='images/toppic01.jpg') }}"></i>
          <p>帝国cms调用方法 <span><a href="/">阅读</a></span> </p>
        </li>
        <li> <i><img src="{{ url_for('static',filename='images/toppic01.jpg') }}"></i>
          <p>5.20 我想对你说 <span><a href="/">阅读</a></span></p>
        </li>
        <li> <i><img src="{{ url_for('static',filename='images/toppic01.jpg') }}"></i>
          <p>个人博客，属于我的小世界！ <span><a href="/">阅读</a></span></p>
        </li>
      </ul>
    </div>
    <div class="tuijian">
      <h2 class="hometitle">推荐文章</h2>
      <ul class="tjpic">
        <i><img src="{{ url_for('static',filename='images/toppic01.jpg') }}"></i>
        <p><a href="/">别让这些闹心的套路，毁了你的网页设计</a></p>
      </ul>
      <ul class="sidenews">
        <li> <i><img src="{{ url_for('static',filename='images/toppic01.jpg') }}"></i>
          <p><a href="/">别让这些闹心的套路，毁了你的网页设计</a></p>
          <span>2018-05-13</span> </li>
        <li> <i><img src="{{ url_for('static',filename='images/toppic02.jpg') }}"></i>
          <p><a href="/">给我模板PSD源文件，我给你设计HTML！</a></p>
          <span>2018-05-13</span> </li>
        <li> <i><img src="{{ url_for('static',filename='images/toppic01.jpg') }}"></i>
          <p><a href="/">别让这些闹心的套路，毁了你的网页设计</a></p>
          <span>2018-05-13</span> </li>
        <li> <i><img src="{{ url_for('static',filename='images/toppic01.jpg') }}"></i>
          <p><a href="/">给我模板PSD源文件，我给你设计HTML！</a></p>
          <span>2018-05-13</span> </li>
      </ul>
    </div>
    <div class="tuijian">
      <h2 class="hometitle">点击排行</h2>
      <ul class="tjpic">
        <i><img src="{{ url_for('static',filename='images/toppic01.jpg')}}"></i>
        <p><a href="/">别让这些闹心的套路，毁了你的网页设计</a></p>
      </ul>
      <ul class="sidenews">
        <li> <i><img src="{{ url_for('static',filename='images/toppic01.jpg')}}"></i>
          <p><a href="/">别让这些闹心的套路</a></p>
          <span>2018-05-13</span> </li>
      </ul>
    </div>
    <div class="cloud">
      <h2 class="hometitle">标签云</h2>
      <ul>
        <a href="/">陌上花开</a> <a href="/">校园生活</a> <a href="/">html5</a> <a href="/">SumSung</a> <a href="/">青春</a> <a href="/">温暖</a> <a href="/">阳光</a> <a href="/">三星</a><a href="/">索尼</a> <a href="/">华维荣耀</a> <a href="/">三星</a> <a href="/">索尼</a>
      </ul>
    </div>
    {{ follow.found() }}
  </div>

<script src="{{ url_for('static',filename='js/mine/blog-content.js') }}" type="text/javascript"></script>
</article>
<script type="text/javascript">
    $(document).ready(function () {
        var user_id = "";
        if ("{{ current_user.is_authenticated }}"=="True"){
            user_id ="{{ current_user.id }}"
        }else {
            user_id = "0"
        }
        var article_id = {{ blog.id }};
        $.ajax({
            url:"http://127.0.0.1:5000/thumb_total/"+article_id,
            type:'GET',
            cache:false,
            dataType:'json',
            success:function (data) {
                console.log(data.total);
                $("#diggnum")[0].innerText=data.total
            }
        });
        $(".diggit").click(function () {
            if (user_id!="0") {
                $.ajax({
                    url:"http://127.0.0.1:5000/thumb/"+user_id+"/"+article_id,
                    type:'GET',
                    cache:false,
                    dataType:'json',
                    success:function (data) {
                        if (data.code==200) {
                            $("#diggnum")[0].innerText =parseInt($("#diggnum")[0].innerText)+ 1;
                            alert(data.message)
                        }else {
                            alert(data.message)
                        }
                    }
                })
            }else {
                alert("你还没有登录")
            }

        })

    });
</script>
{% endblock %}



