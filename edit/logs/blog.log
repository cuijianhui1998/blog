2019-06-20 16:39:30,493 - flask.app - ERROR - Exception on /linux/more [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1835, in full_dispatch_request
    return self.finalize_request(rv)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1850, in finalize_request
    response = self.make_response(rv)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1976, in make_response
    'The view function did not return a valid response. The'
TypeError: The view function did not return a valid response. The function either returned None or ended without a return statement.
2019-06-21 10:47:39,525 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 80, in detail
    tips = Tips.query().order_by(func.rand()).first()
TypeError: 'BaseQuery' object is not callable
2019-06-21 10:48:13,493 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 82, in detail
    tips = message+':  '+tips
TypeError: can only concatenate str (not "NoneType") to str
2019-06-21 10:50:03,558 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 82, in detail
    tips = message+':  '+tips
TypeError: can only concatenate str (not "Tips") to str
2019-06-21 12:11:00,825 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 86, in detail
    right_blog = right_show(id)
  File "D:\ABC\edit\app\lib\common_data.py", line 20, in right_show
    return (_new(),_link(id),_twitter())
  File "D:\ABC\edit\app\lib\common_data.py", line 10, in _link
    about = Article.query.get(id)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 959, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 1069, in _get_impl
    return db_load_fn(self, primary_key_identity)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\loading.py", line 282, in load_on_pk_identity
    return q.one()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3275, in one
    ret = self.one_or_none()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3244, in one_or_none
    ret = list(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3317, in __iter__
    return self._execute_and_instances(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3342, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 988, in execute
    return meth(self, multiparams, params)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\elements.py", line 287, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1107, in _execute_clauseelement
    distilled_params,
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1248, in _execute_context
    e, statement, parameters, cursor, context
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1468, in _handle_dbapi_exception
    util.reraise(*exc_info)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 129, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1244, in _execute_context
    cursor, statement, parameters, context
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\default.py", line 552, in do_execute
    cursor.execute(statement, parameters)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\cursors.py", line 168, in execute
    query = self.mogrify(query, args)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\cursors.py", line 147, in mogrify
    query = query % self._escape_args(args, conn)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\cursors.py", line 127, in _escape_args
    return {key: conn.literal(val) for (key, val) in args.items()}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\cursors.py", line 127, in <dictcomp>
    return {key: conn.literal(val) for (key, val) in args.items()}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 467, in literal
    return self.escape(obj, self.encoders)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 460, in escape
    return converters.escape_item(obj, self.charset, mapping=mapping)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\converters.py", line 27, in escape_item
    val = encoder(val, mapping)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\converters.py", line 118, in escape_unicode
    return u"'%s'" % _escape_unicode(value)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\converters.py", line 73, in _escape_unicode
    return value.translate(_escape_table)
AttributeError: 'builtin_function_or_method' object has no attribute 'translate'
2019-06-21 14:41:43,203 - flask.app - ERROR - Exception on /login [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\auth.py", line 27, in login
    if user and user.check_password(user.password,request.form.get('password')):
TypeError: check_password() takes 2 positional arguments but 3 were given
2019-06-21 15:04:52,325 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 15, in index
    return render_template('index.html',recommend=recommend,list=list,new_blog=new)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\base.html", line 137, in template
    {% block control %}<a href="{{ url_for('web.publish') }}" class="add-blog" title="添加博客"><img src="{{ url_for('static',filename="images/self/add1.png") }}">Go</a>{% endblock %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1005, in render
    return concat(self.root_render_func(self.new_context(vars)))
  File "D:\ABC\edit\app\templates\index.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\base.html", line 137, in template
    {% block control %}<a href="{{ url_for('web.publish') }}" class="add-blog" title="添加博客"><img src="{{ url_for('static',filename="images/self/add1.png") }}">Go</a>{% endblock %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 543, in _generate
    optimized=self.optimized)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\compiler.py", line 82, in generate
    generator.visit(node)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\visitor.py", line 38, in visit
    return f(node, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\compiler.py", line 718, in visit_Template
    self.fail('block %r defined twice' % block.name, block.lineno)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\compiler.py", line 315, in fail
    raise TemplateAssertionError(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateAssertionError: block 'control' defined twice
2019-06-21 15:25:20,917 - flask.app - ERROR - Exception on /logout [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_login\utils.py", line 261, in decorated_view
    return func(*args, **kwargs)
  File "D:\ABC\edit\app\web\auth.py", line 44, in logout
    logout_user(current_user)
TypeError: logout_user() takes 0 positional arguments but 1 was given
2019-06-21 16:46:12,413 - flask.app - ERROR - Exception on /say_me [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\auth.py", line 55, in say_me
    if form.validate_on_submit():
AttributeError: 'MessageForm' object has no attribute 'validate_on_submit'
2019-06-24 09:12:08,523 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 84, in detail
    tips = (message,tips.tip)
AttributeError: 'NoneType' object has no attribute 'tip'
2019-06-24 10:38:02,527 - flask.app - ERROR - Exception on /update [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 115, in update
    article = Article.query.get_or_404(id)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_sqlalchemy\__init__.py", line 422, in get_or_404
    rv = self.get(ident)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 959, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 1026, in _get_impl
    if len(primary_key_identity) != len(mapper.primary_key):
TypeError: object of type 'NoneType' has no len()
2019-06-24 10:42:01,188 - flask.app - ERROR - Exception on /update [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 114, in update
    id = int(request.args.get("id"))
TypeError: int() argument must be a string, a bytes-like object or a number, not 'NoneType'
2019-06-24 10:43:08,076 - flask.app - ERROR - Exception on /update [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 114, in update
    id = int(request.args.get("id"))
TypeError: int() argument must be a string, a bytes-like object or a number, not 'NoneType'
2019-06-24 10:44:19,759 - flask.app - ERROR - Exception on /update [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 115, in update
    article = Article.query.get_or_404(id)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_sqlalchemy\__init__.py", line 422, in get_or_404
    rv = self.get(ident)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 959, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 1026, in _get_impl
    if len(primary_key_identity) != len(mapper.primary_key):
TypeError: object of type 'NoneType' has no len()
2019-06-24 10:45:21,280 - flask.app - ERROR - Exception on /update [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 115, in update
    article = Article.query.get_or_404(id)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_sqlalchemy\__init__.py", line 422, in get_or_404
    rv = self.get(ident)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 959, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 1026, in _get_impl
    if len(primary_key_identity) != len(mapper.primary_key):
TypeError: object of type 'NoneType' has no len()
2019-06-24 10:47:39,326 - flask.app - ERROR - Exception on /update [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 115, in update
    article = Article.query.get_or_404(id)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_sqlalchemy\__init__.py", line 422, in get_or_404
    rv = self.get(ident)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 959, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 1026, in _get_impl
    if len(primary_key_identity) != len(mapper.primary_key):
TypeError: object of type 'NoneType' has no len()
2019-06-24 10:49:56,844 - flask.app - ERROR - Exception on /update [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 115, in update
    article = Article.query.get_or_404(id)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_sqlalchemy\__init__.py", line 422, in get_or_404
    rv = self.get(ident)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 959, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 1026, in _get_impl
    if len(primary_key_identity) != len(mapper.primary_key):
TypeError: object of type 'NoneType' has no len()
2019-06-24 10:50:57,901 - flask.app - ERROR - Exception on /update [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 115, in update
    article = Article.query.get_or_404(id)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_sqlalchemy\__init__.py", line 422, in get_or_404
    rv = self.get(ident)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 959, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 1026, in _get_impl
    if len(primary_key_identity) != len(mapper.primary_key):
TypeError: object of type 'NoneType' has no len()
2019-06-24 10:56:29,776 - flask.app - ERROR - Exception on /update [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1179, in _execute_context
    context = constructor(dialect, self, conn, *args)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\default.py", line 745, in _init_compiled
    for key in compiled_params
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\default.py", line 745, in <genexpr>
    for key in compiled_params
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\sqltypes.py", line 1782, in process
    value = _strict_as_bool(value)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\sqltypes.py", line 1757, in _strict_as_bool
    raise TypeError("Not a boolean value: %r" % value)
TypeError: Not a boolean value: '0'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 118, in update
    article.is_recommend = request.form.get("is_recommend")
  File "c:\users\hui\appdata\local\programs\python\python37\Lib\contextlib.py", line 119, in __exit__
    next(self.gen)
  File "D:\ABC\edit\app\models.py", line 21, in submit_data
    raise e
  File "D:\ABC\edit\app\models.py", line 18, in submit_data
    self.session.commit()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\scoping.py", line 162, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 1026, in commit
    self.transaction.commit()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 493, in commit
    self._prepare_impl()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 472, in _prepare_impl
    self.session.flush()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 2451, in flush
    self._flush(objects)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 2589, in _flush
    transaction.rollback(_capture_exception=True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\langhelpers.py", line 68, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 129, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 2549, in _flush
    flush_context.execute()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 422, in execute
    rec.execute(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 589, in execute
    uow,
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\persistence.py", line 236, in save_obj
    update,
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\persistence.py", line 978, in _emit_update_statements
    statement, multiparams
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 988, in execute
    return meth(self, multiparams, params)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\elements.py", line 287, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1107, in _execute_clauseelement
    distilled_params,
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1182, in _execute_context
    e, util.text_type(statement), parameters, None, None
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1466, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 383, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 128, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1179, in _execute_context
    context = constructor(dialect, self, conn, *args)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\default.py", line 745, in _init_compiled
    for key in compiled_params
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\default.py", line 745, in <genexpr>
    for key in compiled_params
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\sqltypes.py", line 1782, in process
    value = _strict_as_bool(value)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\sqltypes.py", line 1757, in _strict_as_bool
    raise TypeError("Not a boolean value: %r" % value)
sqlalchemy.exc.StatementError: (builtins.TypeError) Not a boolean value: '0'
[SQL: UPDATE article SET is_recommend=%(is_recommend)s WHERE article.id = %(article_id)s]
[parameters: [{'is_recommend': '0', 'article_id': 1}]]
2019-06-24 11:04:30,788 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 84, in detail
    tips = (message,tips.tip)
AttributeError: 'NoneType' object has no attribute 'tip'
2019-06-24 11:21:47,502 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 15, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,new_blog=new)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 2, in top-level template code
    {% import 'macro/recommond.html' as reco %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1073, in make_module
    return TemplateModule(self, self.new_context(vars, shared, locals))
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1152, in __init__
    body_stream = list(template.root_render_func(context))
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 16, in top-level template code
    <li><a href="{{ url_for('web.update',id=blog.id) }}">修改</a></li>
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'blog' is undefined
2019-06-24 11:24:14,873 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 15, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,new_blog=new)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 2, in top-level template code
    {% import 'macro/recommond.html' as reco %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1073, in make_module
    return TemplateModule(self, self.new_context(vars, shared, locals))
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1152, in __init__
    body_stream = list(template.root_render_func(context))
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 16, in top-level template code
    <li><a href="{{ url_for('web.update',id=blog.id) }}">修改</a></li>
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'blog' is undefined
2019-06-24 15:36:30,438 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1244, in _execute_context
    cursor, statement, parameters, context
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\default.py", line 552, in do_execute
    cursor.execute(statement, parameters)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\cursors.py", line 170, in execute
    result = self._query(query)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\cursors.py", line 328, in _query
    conn.query(q)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 517, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 732, in _read_query_result
    result.read()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 1075, in read
    first_packet = self.connection._read_packet()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 684, in _read_packet
    packet.check_error()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\protocol.py", line 220, in check_error
    err.raise_mysql_exception(self._data)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\err.py", line 109, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.InternalError: (1054, "Unknown column 'article.auth_id' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 15, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,new_blog=new)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 3, in top-level template code
    {% import 'macro/person.html' as follow %}
  File "D:\ABC\edit\app\templates\base.html", line 130, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 17, in block "content"
    {% for blog in recommend %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3317, in __iter__
    return self._execute_and_instances(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3342, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 988, in execute
    return meth(self, multiparams, params)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\elements.py", line 287, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1107, in _execute_clauseelement
    distilled_params,
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1248, in _execute_context
    e, statement, parameters, cursor, context
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1466, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 383, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 128, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1244, in _execute_context
    cursor, statement, parameters, context
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\default.py", line 552, in do_execute
    cursor.execute(statement, parameters)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\cursors.py", line 170, in execute
    result = self._query(query)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\cursors.py", line 328, in _query
    conn.query(q)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 517, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 732, in _read_query_result
    result.read()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 1075, in read
    first_packet = self.connection._read_packet()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 684, in _read_packet
    packet.check_error()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\protocol.py", line 220, in check_error
    err.raise_mysql_exception(self._data)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\err.py", line 109, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.InternalError: (pymysql.err.InternalError) (1054, "Unknown column 'article.auth_id' in 'field list'")
[SQL: SELECT article.create_time AS article_create_time, article.id AS article_id, article.title AS article_title, article.body AS article_body, article.body_html AS article_body_html, article.`select` AS article_select, article.is_recommend AS article_is_recommend, article.poster AS article_poster, article.auth_id AS article_auth_id 
FROM article 
WHERE article.is_recommend = %(is_recommend_1)s 
 LIMIT %(param_1)s]
[parameters: {'is_recommend_1': 1, 'param_1': 3}]
(Background on this error at: http://sqlalche.me/e/2j85)
2019-06-24 15:52:37,300 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 15, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,new_blog=new)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 3, in top-level template code
    {% import 'macro/person.html' as follow %}
  File "D:\ABC\edit\app\templates\base.html", line 130, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 46, in block "content"
    {{ reco.showlist(blogs) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 20, in template
    {% if current_user.is_authenticated and current_user.username==blog.username %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'current_user' is undefined
2019-06-24 16:02:04,084 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 82, in detail
    tips = (message,tips.tip)
AttributeError: 'NoneType' object has no attribute 'tip'
2019-06-24 17:55:15,145 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 85, in detail
    return render_template('detail.html',blog=blog,tips=tips,form=form)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 2, in top-level template code
    {% import 'macro/person.html' as follow %}
  File "D:\ABC\edit\app\templates\base.html", line 130, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 100, in block "content"
    <form action="{{ url_for('web.reply') }}" method="post" class="reply-form leave_message">
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\helpers.py", line 356, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2080, in handle_url_build_error
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\helpers.py", line 345, in url_for
    force_external=external)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\werkzeug\routing.py", line 2007, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'web.reply'. Did you mean 'web.frame_all' instead?
2019-06-24 18:46:50,270 - flask.app - ERROR - Exception on /comment [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1835, in full_dispatch_request
    return self.finalize_request(rv)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1850, in finalize_request
    response = self.make_response(rv)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1976, in make_response
    'The view function did not return a valid response. The'
TypeError: The view function did not return a valid response. The function either returned None or ended without a return statement.
2019-06-24 18:47:37,192 - flask.app - ERROR - Exception on /comment [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1835, in full_dispatch_request
    return self.finalize_request(rv)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1850, in finalize_request
    response = self.make_response(rv)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1976, in make_response
    'The view function did not return a valid response. The'
TypeError: The view function did not return a valid response. The function either returned None or ended without a return statement.
2019-06-24 18:49:36,399 - flask.app - ERROR - Exception on /comment [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1835, in full_dispatch_request
    return self.finalize_request(rv)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1850, in finalize_request
    response = self.make_response(rv)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1976, in make_response
    'The view function did not return a valid response. The'
TypeError: The view function did not return a valid response. The function either returned None or ended without a return statement.
2019-06-24 19:18:04,674 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 26, in detail
    return render_template('detail.html',blog=blog,tips=tips,comment_form=comment_form,reply_form=reply_form)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 2, in top-level template code
    {% import 'macro/person.html' as follow %}
  File "D:\ABC\edit\app\templates\base.html", line 130, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 100, in block "content"
    <form action="{{ url_for('web.reply') }}" method="post" class="reply-form leave_message">
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\helpers.py", line 356, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2080, in handle_url_build_error
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\helpers.py", line 345, in url_for
    force_external=external)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\werkzeug\routing.py", line 2007, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'web.reply'. Did you mean 'web.frame_all' instead?
2019-06-24 19:57:51,636 - flask.app - ERROR - Exception on /reply [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 1943, in add
    state = attributes.instance_state(instance)
AttributeError: 'function' object has no attribute '_sa_instance_state'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 75, in reply
    db.session.add(comment)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\scoping.py", line 162, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 1945, in add
    raise exc.UnmappedInstanceError(instance)
sqlalchemy.orm.exc.UnmappedInstanceError: Class 'builtins.function' is not mapped
2019-06-24 20:16:31,572 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 25, in detail
    reply_form=reply_form)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 2, in top-level template code
    {% import 'macro/person.html' as follow %}
  File "D:\ABC\edit\app\templates\base.html", line 130, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 99, in block "content"
    <span id="reply-total">{{ len(comment.replys) }}条回复</span>
jinja2.exceptions.UndefinedError: 'len' is undefined
2019-06-24 20:17:33,061 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 25, in detail
    reply_form=reply_form)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 2, in top-level template code
    {% import 'macro/person.html' as follow %}
  File "D:\ABC\edit\app\templates\base.html", line 130, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 99, in block "content"
    <span id="reply-total">{{ length(comment.replys) }}条回复</span>
jinja2.exceptions.UndefinedError: 'length' is undefined
2019-06-25 11:08:43,832 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 25, in detail
    reply_form=reply_form)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% import 'macro/comment.html' as comments %}
  File "D:\ABC\edit\app\templates\base.html", line 130, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 92, in block "content"
    {{ comments.comment(blog.comments) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\comment.html", line 12, in template
    <form action="{{ url_for('web.reply',id=blog.id,comment_id=comment.id) }}" method="post" class="reply-form leave_message">
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'blog' is undefined
2019-06-25 11:09:58,235 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 25, in detail
    reply_form=reply_form)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% import 'macro/comment.html' as comments %}
  File "D:\ABC\edit\app\templates\base.html", line 130, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 92, in block "content"
    {{ comments.comment(blog) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\comment.html", line 5, in template
    {% for comment in blog.comments %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'blog' is undefined
2019-06-25 14:42:09,841 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 22, in detail
    pageinations = Comment.query.with_parent(blog).order_by(Comment.create_time.asc()).paginatie(page,per_page=5)
AttributeError: 'BaseQuery' object has no attribute 'paginatie'
2019-06-25 14:42:44,706 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 27, in detail
    reply_form=reply_form,pageinations=pageinations)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% import 'macro/comment.html' as comments %}
  File "D:\ABC\edit\app\templates\base.html", line 130, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 93, in block "content"
    {{ comments.comment(blog,pageinations) }}
TypeError: macro 'comment' takes not more than 1 argument(s)
2019-06-25 15:06:23,581 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 28, in detail
    reply_form=reply_form,pageinations=pageinations,comments=comments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% import 'macro/comment.html' as comments %}
  File "D:\ABC\edit\app\templates\base.html", line 133, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 99, in block "content"
    {{ comments.comment(blog,comments,pageinations) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\comment.html", line 7, in template
    {% for comment in comments %}
TypeError: 'TemplateModule' object is not iterable
2019-06-25 15:12:19,082 - flask.app - ERROR - Exception on /comment [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_login\utils.py", line 261, in decorated_view
    return func(*args, **kwargs)
  File "D:\ABC\edit\app\web\comment.py", line 53, in comment
    reply_form=reply_form)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% from 'macro/comment.html' import comment %}
  File "D:\ABC\edit\app\templates\base.html", line 133, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 99, in block "content"
    {{ comment(blog,comments,pageinations) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\comment.html", line 26, in template
    {{ render_pagination(paginations,fragment="#comment-list") }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_bootstrap\templates\bootstrap\pagination.html", line 57, in template
    <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'pageinations' is undefined
2019-06-25 15:41:28,435 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 15, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,new_blog=new)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 3, in top-level template code
    {% import 'macro/person.html' as follow %}
  File "D:\ABC\edit\app\templates\base.html", line 133, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 46, in block "content"
    {{ reco.showlist(blogs,current_user) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 57, in template
    {{ render_pagination(paginations) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_bootstrap\templates\bootstrap\pagination.html", line 57, in template
    <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: parameter 'paginations' was not provided
2019-06-25 15:44:03,985 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 18, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,new_blog=new,paginations=paginations)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 3, in top-level template code
    {% import 'macro/person.html' as follow %}
  File "D:\ABC\edit\app\templates\base.html", line 133, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 46, in block "content"
    {{ reco.showlist(blogs,current_user,pageinations) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 57, in template
    {{ render_pagination(paginations) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_bootstrap\templates\bootstrap\pagination.html", line 57, in template
    <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'pageinations' is undefined
2019-06-25 15:47:38,562 - flask.app - ERROR - Exception on /python/ [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\blog_classes\python.py", line 19, in python_all
    return render_template('list.html', blogs=blogs, title=title)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\list.html", line 3, in top-level template code
    {% import 'macro/recommond.html' as reco %}
  File "D:\ABC\edit\app\templates\base.html", line 135, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\list.html", line 17, in block "content"
    {{ reco.showlist(blogs,current_user,paginations) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 57, in template
    {{ render_pagination(paginations) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_bootstrap\templates\bootstrap\pagination.html", line 57, in template
    <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'paginations' is undefined
2019-06-25 21:33:34,375 - flask.app - ERROR - Exception on /publish [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\urllib3\connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\urllib3\util\connection.py", line 57, in create_connection
    for res in socket.getaddrinfo(host, port, family, socket.SOCK_STREAM):
  File "c:\users\hui\appdata\local\programs\python\python37\Lib\socket.py", line 748, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\urllib3\connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\urllib3\connectionpool.py", line 344, in _make_request
    self._validate_conn(conn)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\urllib3\connectionpool.py", line 843, in _validate_conn
    conn.connect()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\urllib3\connection.py", line 305, in connect
    conn = self._new_conn()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\urllib3\connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.VerifiedHTTPSConnection object at 0x0000018E89B4E7B8>: Failed to establish a new connection: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\requests\adapters.py", line 449, in send
    timeout=timeout
  File "D:\ABC\virtu-manage\blog\lib\site-packages\urllib3\connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "D:\ABC\virtu-manage\blog\lib\site-packages\urllib3\util\retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='uc.qbox.me', port=443): Max retries exceeded with url: /v1/query?ak=yqSGVN0FE4wkhVX2S4xAWlqDOtze7PYpHdV9WAVc&bucket=private-blog-image (Caused by NewConnectionError('<urllib3.connection.VerifiedHTTPSConnection object at 0x0000018E89B4E7B8>: Failed to establish a new connection: [Errno 11001] getaddrinfo failed'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_login\utils.py", line 261, in decorated_view
    return func(*args, **kwargs)
  File "D:\ABC\edit\app\web\release.py", line 35, in publish
    poster = uploadImg(imgData)
  File "D:\ABC\edit\app\lib\photo_shop.py", line 14, in uploadImg
    ret,info = put_data(token,None,fileData)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\qiniu\services\storage\uploader.py", line 42, in put_data
    return _form_put(up_token, key, final_data, params, mime_type, crc, progress_handler, fname)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\qiniu\services\storage\uploader.py", line 98, in _form_put
    url = config.get_default('default_zone').get_up_host_by_token(up_token)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\qiniu\region.py", line 35, in get_up_host_by_token
    up_hosts = self.get_up_host(ak, bucket)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\qiniu\region.py", line 55, in get_up_host
    bucket_hosts = self.get_bucket_hosts(ak, bucket)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\qiniu\region.py", line 101, in get_bucket_hosts
    hosts = compat.json.loads(self.bucket_hosts(ak, bucket))
  File "D:\ABC\virtu-manage\blog\lib\site-packages\qiniu\region.py", line 159, in bucket_hosts
    ret = requests.get(url)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\requests\api.py", line 75, in get
    return request('get', url, params=params, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\requests\api.py", line 60, in request
    return session.request(method=method, url=url, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\requests\sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\requests\sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\requests\adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPSConnectionPool(host='uc.qbox.me', port=443): Max retries exceeded with url: /v1/query?ak=yqSGVN0FE4wkhVX2S4xAWlqDOtze7PYpHdV9WAVc&bucket=private-blog-image (Caused by NewConnectionError('<urllib3.connection.VerifiedHTTPSConnection object at 0x0000018E89B4E7B8>: Failed to establish a new connection: [Errno 11001] getaddrinfo failed'))
2019-06-26 09:25:06,193 - flask.app - ERROR - Exception on /time [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 98, in time_axis
    logs = [(datetime.date(l.create_time),l.title,l.id) for l in logs]
  File "D:\ABC\edit\app\web\release.py", line 98, in <listcomp>
    logs = [(datetime.date(l.create_time),l.title,l.id) for l in logs]
TypeError: an integer is required (got type datetime.datetime)
2019-06-26 09:28:50,681 - flask.app - ERROR - Exception on /time [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 98, in time_axis
    logs = [(datetime.date(l.create_time),l.title,l.id) for l in logs]
  File "D:\ABC\edit\app\web\release.py", line 98, in <listcomp>
    logs = [(datetime.date(l.create_time),l.title,l.id) for l in logs]
TypeError: an integer is required (got type datetime.datetime)
2019-06-26 09:29:00,749 - flask.app - ERROR - Exception on /time [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 98, in time_axis
    logs = [(datetime.date(l.create_time),l.title,l.id) for l in logs]
  File "D:\ABC\edit\app\web\release.py", line 98, in <listcomp>
    logs = [(datetime.date(l.create_time),l.title,l.id) for l in logs]
TypeError: an integer is required (got type datetime.datetime)
2019-06-26 09:29:35,631 - flask.app - ERROR - Exception on /life/notes [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 34, in life_notes
    return render_template('list.html')
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\list.html", line 3, in top-level template code
    {% import 'macro/recommond.html' as reco %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\list.html", line 17, in block "content"
    {{ reco.showlist(blogs,current_user,paginations) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 57, in template
    {{ render_pagination(paginations) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_bootstrap\templates\bootstrap\pagination.html", line 57, in template
    <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'paginations' is undefined
2019-06-26 10:17:28,189 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 18, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,right=right,paginations=paginations)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 133, in render_template
    ctx.app.update_template_context(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 793, in update_template_context
    context.update(func())
TypeError: cannot convert dictionary update sequence element #0 to a sequence
2019-06-26 10:37:07,453 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 17, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,paginations=paginations)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 45, in block "content"
    {{ reco.showlist(blogs,current_user,paginations) }}
jinja2.exceptions.UndefinedError: 'flask_sqlalchemy.BaseQuery object' has no attribute 'showlist'
2019-06-26 10:39:49,452 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 17, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,paginations=paginations)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 2, in top-level template code
    {% from 'macro/person.html' import found %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 45, in block "content"
    {{ reco.showlist(blogs,current_user,paginations) }}
jinja2.exceptions.UndefinedError: 'flask_sqlalchemy.BaseQuery object' has no attribute 'showlist'
2019-06-26 10:41:30,391 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 17, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,paginations=paginations)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 3, in top-level template code
    {% from  'macro/recommond.html' import showlist,new %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 50, in block "content"
    {% include 'common.html' %}
  File "D:\ABC\edit\app\templates\common.html", line 3, in top-level template code
    {{ new(new) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 6, in template
    {% for blog in blogs %}
TypeError: 'Macro' object is not iterable
2019-06-26 10:44:04,186 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 17, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,paginations=paginations)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 3, in top-level template code
    {% from  'macro/recommond.html' import showlist,new %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 50, in block "content"
    {% include 'common.html' %}
  File "D:\ABC\edit\app\templates\common.html", line 30, in top-level template code
    <i><img src="{{ top[0].poster }}"></i>
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: flask_sqlalchemy.BaseQuery object has no element 0
2019-06-26 11:10:20,319 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 18, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,paginations=paginations,flask_blogs=flask_blogs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 134, in render_template
    return _render(ctx.app.jinja_env.get_or_select_template(template_name_or_list),
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 869, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 830, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 804, in _load_template
    template = self.loader.load(self, name, globals)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\loaders.py", line 125, in load
    code = environment.compile(source, name, filename)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 591, in compile
    self.handle_exception(exc_info, source_hint=source_hint)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 32, in template
    {% blog foo in flask_blogs %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 497, in _parse
    return Parser(self, source, name, encode_filename(filename)).parse()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\parser.py", line 901, in parse
    result = nodes.Template(self.subparse(), lineno=1)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\parser.py", line 130, in parse_statement
    return getattr(self, 'parse_' + self.stream.current.value)()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\parser.py", line 268, in parse_block
    node.body = self.parse_statements(('name:endblock',), drop_needle=True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\parser.py", line 165, in parse_statements
    result = self.subparse(end_tokens)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\parser.py", line 883, in subparse
    rv = self.parse_statement()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\parser.py", line 144, in parse_statement
    self.fail_unknown_tag(token.value, token.lineno)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\parser.py", line 97, in fail_unknown_tag
    return self._fail_ut_eof(name, self._end_token_stack, lineno)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\parser.py", line 90, in _fail_ut_eof
    self.fail(' '.join(message), lineno)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\parser.py", line 59, in fail
    raise exc(msg, lineno, self.name, self.filename)
jinja2.exceptions.TemplateSyntaxError: Encountered unknown tag 'blog'. Jinja was looking for the following tags: 'endblock'. The innermost block that needs to be closed is 'block'.
2019-06-26 11:14:08,057 - flask.app - ERROR - Exception on /python/base [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\blog_classes\python.py", line 22, in python_base
    return render_template('list.html', blogs=blogs, title=title,paginations=paginations)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\list.html", line 3, in top-level template code
    {% import 'macro/recommond.html' as reco %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\list.html", line 20, in block "content"
    {% include 'common.html' %}
  File "D:\ABC\edit\app\templates\common.html", line 16, in top-level template code
    <i><img src="{{ reco[0].poster }}"></i>
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: jinja2.environment.TemplateModule object has no element 0
2019-06-26 11:15:11,323 - flask.app - ERROR - Exception on /python/base [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\blog_classes\python.py", line 22, in python_base
    return render_template('list.html', blogs=blogs, title=title,paginations=paginations)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\list.html", line 3, in top-level template code
    {% from  'macro/recommond.html' import showlist %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\list.html", line 17, in block "content"
    {{ reco.showlist(blogs,current_user,paginations) }}
jinja2.exceptions.UndefinedError: 'flask_sqlalchemy.BaseQuery object' has no attribute 'showlist'
2019-06-26 17:13:44,443 - flask.app - ERROR - Exception on /thumb_total/1 [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 94, in thumb_total
    result = dict(total=total,aid=aid)
TypeError: unsupported operand type(s) for +: 'NoneType' and 'int'
2019-06-26 17:14:47,436 - flask.app - ERROR - Exception on /thumb_total/1 [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 93, in thumb_total
    total = int(redis.hget('thumb_total',aid))+len(redis.smembers('thumb-'+aid))
TypeError: int() argument must be a string, a bytes-like object or a number, not 'NoneType'
2019-06-26 17:21:27,900 - flask.app - ERROR - Exception on /celery [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1244, in _execute_context
    cursor, statement, parameters, context
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\default.py", line 552, in do_execute
    cursor.execute(statement, parameters)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\cursors.py", line 170, in execute
    result = self._query(query)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\cursors.py", line 328, in _query
    conn.query(q)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 517, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 732, in _read_query_result
    result.read()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 1075, in read
    first_packet = self.connection._read_packet()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 684, in _read_packet
    packet.check_error()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\protocol.py", line 220, in check_error
    err.raise_mysql_exception(self._data)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\err.py", line 109, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.IntegrityError: (1452, 'Cannot add or update a child row: a foreign key constraint fails (`blog`.`thumb`, CONSTRAINT `thumb_ibfk_2` FOREIGN KEY (`auth_id`) REFERENCES `auth` (`id`))')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 113, in import_data
    redis_to_mysql()
  File "D:\ABC\edit\app\lib\redis_thumb.py", line 25, in redis_to_mysql
    db.session.add(t)
  File "c:\users\hui\appdata\local\programs\python\python37\Lib\contextlib.py", line 119, in __exit__
    next(self.gen)
  File "D:\ABC\edit\app\models.py", line 22, in submit_data
    raise e
  File "D:\ABC\edit\app\models.py", line 19, in submit_data
    self.session.commit()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\scoping.py", line 162, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 1026, in commit
    self.transaction.commit()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 493, in commit
    self._prepare_impl()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 472, in _prepare_impl
    self.session.flush()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 2451, in flush
    self._flush(objects)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 2589, in _flush
    transaction.rollback(_capture_exception=True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\langhelpers.py", line 68, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 129, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 2549, in _flush
    flush_context.execute()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 422, in execute
    rec.execute(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 589, in execute
    uow,
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\persistence.py", line 245, in save_obj
    insert,
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\persistence.py", line 1120, in _emit_insert_statements
    statement, params
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 988, in execute
    return meth(self, multiparams, params)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\elements.py", line 287, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1107, in _execute_clauseelement
    distilled_params,
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1248, in _execute_context
    e, statement, parameters, cursor, context
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1466, in _handle_dbapi_exception
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 383, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 128, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1244, in _execute_context
    cursor, statement, parameters, context
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\default.py", line 552, in do_execute
    cursor.execute(statement, parameters)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\cursors.py", line 170, in execute
    result = self._query(query)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\cursors.py", line 328, in _query
    conn.query(q)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 517, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 732, in _read_query_result
    result.read()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 1075, in read
    first_packet = self.connection._read_packet()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 684, in _read_packet
    packet.check_error()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\protocol.py", line 220, in check_error
    err.raise_mysql_exception(self._data)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\err.py", line 109, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.IntegrityError: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`blog`.`thumb`, CONSTRAINT `thumb_ibfk_2` FOREIGN KEY (`auth_id`) REFERENCES `auth` (`id`))')
[SQL: INSERT INTO thumb (create_time, auth_id, article_id) VALUES (%(create_time)s, %(auth_id)s, %(article_id)s)]
[parameters: {'create_time': datetime.datetime(2019, 6, 26, 9, 21, 27, 856997), 'auth_id': b'3', 'article_id': 5}]
(Background on this error at: http://sqlalche.me/e/gkpj)
2019-06-26 17:23:35,883 - flask.app - ERROR - Exception on /celery [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1835, in full_dispatch_request
    return self.finalize_request(rv)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1850, in finalize_request
    response = self.make_response(rv)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1976, in make_response
    'The view function did not return a valid response. The'
TypeError: The view function did not return a valid response. The function either returned None or ended without a return statement.
2019-06-26 17:30:25,325 - flask.app - ERROR - Exception on /thumb_total/4 [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 93, in thumb_total
    total = int(redis.hget('thumb_total',aid))+len(redis.smembers('thumb-'+aid))
TypeError: int() argument must be a string, a bytes-like object or a number, not 'NoneType'
2019-06-27 08:46:01,455 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 583, in connect
    **kwargs)
  File "c:\users\hui\appdata\local\programs\python\python37\Lib\socket.py", line 727, in create_connection
    raise err
  File "c:\users\hui\appdata\local\programs\python\python37\Lib\socket.py", line 716, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 2262, in _wrap_pool_connect
    return fn()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 363, in connect
    return _ConnectionFairy._checkout(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 760, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 492, in checkout
    rec = pool._do_get()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\impl.py", line 139, in _do_get
    self._dec_overflow()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\langhelpers.py", line 68, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 129, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\impl.py", line 136, in _do_get
    return self._create_connection()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 308, in _create_connection
    return _ConnectionRecord(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 437, in __init__
    self.__connect(first_connect_check=True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 639, in __connect
    connection = pool._invoke_creator(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\strategies.py", line 114, in connect
    return dialect.connect(*cargs, **cparams)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\default.py", line 453, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\__init__.py", line 94, in Connect
    return Connection(*args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 325, in __init__
    self.connect()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 630, in connect
    raise exc
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 15, in index
    Article.create_time.desc()).paginate(page, per_page=10)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_sqlalchemy\__init__.py", line 496, in paginate
    items = self.limit(per_page).offset((page - 1) * per_page).all()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3161, in all
    return list(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3317, in __iter__
    return self._execute_and_instances(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3339, in _execute_and_instances
    querycontext, self._connection_from_session, close_with_result=True
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3354, in _get_bind_args
    mapper=self._bind_mapper(), clause=querycontext.statement, **kw
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3332, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 1123, in connection
    execution_options=execution_options,
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 1129, in _connection_for_bind
    engine, execution_options
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 430, in _connection_for_bind
    conn = bind._contextual_connect()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 2226, in _contextual_connect
    self._wrap_pool_connect(self.pool.connect, None),
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 2266, in _wrap_pool_connect
    e, dialect, self
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1536, in _handle_dbapi_exception_noconnection
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 383, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 128, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 2262, in _wrap_pool_connect
    return fn()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 363, in connect
    return _ConnectionFairy._checkout(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 760, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 492, in checkout
    rec = pool._do_get()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\impl.py", line 139, in _do_get
    self._dec_overflow()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\langhelpers.py", line 68, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 129, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\impl.py", line 136, in _do_get
    return self._create_connection()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 308, in _create_connection
    return _ConnectionRecord(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 437, in __init__
    self.__connect(first_connect_check=True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 639, in __connect
    connection = pool._invoke_creator(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\strategies.py", line 114, in connect
    return dialect.connect(*cargs, **cparams)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\default.py", line 453, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\__init__.py", line 94, in Connect
    return Connection(*args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 325, in __init__
    self.connect()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 630, in connect
    raise exc
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")
(Background on this error at: http://sqlalche.me/e/e3q8)
2019-06-27 08:46:03,720 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 583, in connect
    **kwargs)
  File "c:\users\hui\appdata\local\programs\python\python37\Lib\socket.py", line 727, in create_connection
    raise err
  File "c:\users\hui\appdata\local\programs\python\python37\Lib\socket.py", line 716, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 2262, in _wrap_pool_connect
    return fn()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 363, in connect
    return _ConnectionFairy._checkout(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 760, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 492, in checkout
    rec = pool._do_get()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\impl.py", line 139, in _do_get
    self._dec_overflow()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\langhelpers.py", line 68, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 129, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\impl.py", line 136, in _do_get
    return self._create_connection()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 308, in _create_connection
    return _ConnectionRecord(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 437, in __init__
    self.__connect(first_connect_check=True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 639, in __connect
    connection = pool._invoke_creator(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\strategies.py", line 114, in connect
    return dialect.connect(*cargs, **cparams)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\default.py", line 453, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\__init__.py", line 94, in Connect
    return Connection(*args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 325, in __init__
    self.connect()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 630, in connect
    raise exc
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 15, in index
    Article.create_time.desc()).paginate(page, per_page=10)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_sqlalchemy\__init__.py", line 496, in paginate
    items = self.limit(per_page).offset((page - 1) * per_page).all()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3161, in all
    return list(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3317, in __iter__
    return self._execute_and_instances(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3339, in _execute_and_instances
    querycontext, self._connection_from_session, close_with_result=True
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3354, in _get_bind_args
    mapper=self._bind_mapper(), clause=querycontext.statement, **kw
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 3332, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 1123, in connection
    execution_options=execution_options,
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 1129, in _connection_for_bind
    engine, execution_options
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\session.py", line 430, in _connection_for_bind
    conn = bind._contextual_connect()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 2226, in _contextual_connect
    self._wrap_pool_connect(self.pool.connect, None),
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 2266, in _wrap_pool_connect
    e, dialect, self
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 1536, in _handle_dbapi_exception_noconnection
    util.raise_from_cause(sqlalchemy_exception, exc_info)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 383, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 128, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\base.py", line 2262, in _wrap_pool_connect
    return fn()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 363, in connect
    return _ConnectionFairy._checkout(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 760, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 492, in checkout
    rec = pool._do_get()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\impl.py", line 139, in _do_get
    self._dec_overflow()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\langhelpers.py", line 68, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\util\compat.py", line 129, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\impl.py", line 136, in _do_get
    return self._create_connection()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 308, in _create_connection
    return _ConnectionRecord(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 437, in __init__
    self.__connect(first_connect_check=True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\pool\base.py", line 639, in __connect
    connection = pool._invoke_creator(self)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\strategies.py", line 114, in connect
    return dialect.connect(*cargs, **cparams)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\engine\default.py", line 453, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\__init__.py", line 94, in Connect
    return Connection(*args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 325, in __init__
    self.connect()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\pymysql\connections.py", line 630, in connect
    raise exc
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost' ([WinError 10061] 由于目标计算机积极拒绝，无法连接。)")
(Background on this error at: http://sqlalche.me/e/e3q8)
2019-06-27 08:57:19,099 - flask.app - ERROR - Exception on /thumb_total/20 [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 97, in thumb_total
    total = int(redis.hget('thumbs_total',aid))+len(redis.smembers('thumb-'+aid))
TypeError: int() argument must be a string, a bytes-like object or a number, not 'NoneType'
2019-06-27 08:57:40,288 - flask.app - ERROR - Exception on /thumb_total/20 [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 97, in thumb_total
    total = int(redis.hget('thumbs_total',aid))+len(redis.smembers('thumb-'+aid))
TypeError: int() argument must be a string, a bytes-like object or a number, not 'NoneType'
2019-06-27 08:58:07,163 - flask.app - ERROR - Exception on /thumb_total/30 [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 97, in thumb_total
    total = int(redis.hget('thumbs_total',aid))+len(redis.smembers('thumb-'+aid))
TypeError: int() argument must be a string, a bytes-like object or a number, not 'NoneType'
2019-06-27 08:59:40,677 - flask.app - ERROR - Exception on /thumb_total/30 [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 97, in thumb_total
    total = int(redis.hget('thumbs_total',aid))+len(redis.smembers('thumb-'+aid))
TypeError: int() argument must be a string, a bytes-like object or a number, not 'NoneType'
2019-06-27 09:00:20,670 - flask.app - ERROR - Exception on /thumb_total/30 [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 98, in thumb_total
    total = int(redis.hget('thumbs_total',aid))+len(redis.smembers('thumb-'+aid))
TypeError: int() argument must be a string, a bytes-like object or a number, not 'NoneType'
2019-06-28 14:41:58,405 - flask.app - ERROR - Exception on /cutuploads/ [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 80, in cutuploads
    basestr = base64.b64decode(request.args.get('base64'))
  File "D:\ABC\virtu-manage\blog\lib\base64.py", line 80, in b64decode
    s = _bytes_from_decode_data(s)
  File "D:\ABC\virtu-manage\blog\lib\base64.py", line 46, in _bytes_from_decode_data
    "string, not %r" % s.__class__.__name__) from None
TypeError: argument should be a bytes-like object or ASCII string, not 'NoneType'
2019-06-28 14:45:35,659 - flask.app - ERROR - Exception on /cutuploads/ [POST]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 80, in cutuploads
    basestr = base64.b64decode(request.args.get('base64'))
  File "D:\ABC\virtu-manage\blog\lib\base64.py", line 80, in b64decode
    s = _bytes_from_decode_data(s)
  File "D:\ABC\virtu-manage\blog\lib\base64.py", line 46, in _bytes_from_decode_data
    "string, not %r" % s.__class__.__name__) from None
TypeError: argument should be a bytes-like object or ASCII string, not 'NoneType'
2019-06-28 14:57:54,494 - flask.app - ERROR - Exception on /cutuploads/ [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 80, in cutuploads
    basestr = base64.b64decode(request.args.get('base64'))
  File "D:\ABC\virtu-manage\blog\lib\base64.py", line 87, in b64decode
    return binascii.a2b_base64(s)
binascii.Error: Incorrect padding
2019-06-28 15:00:14,638 - flask.app - ERROR - Exception on /cutuploads/ [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 82, in cutuploads
    f.write(basestr)
TypeError: a bytes-like object is required, not 'str'
2019-06-28 15:19:42,104 - flask.app - ERROR - Exception on /cutuploads/ [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 82, in cutuploads
    x = base64.b64decode(x)
TypeError: a bytes-like object is required, not 'str'
2019-06-28 15:21:39,726 - flask.app - ERROR - Exception on /cutuploads/ [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 81, in cutuploads
    x = basestr.encode('utf-8').replace("data:image/png;base64,", '')
TypeError: a bytes-like object is required, not 'str'
2019-06-28 15:22:12,088 - flask.app - ERROR - Exception on /cutuploads/ [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 81, in cutuploads
    print(type(basestr))
TypeError: a bytes-like object is required, not 'str'
2019-06-28 15:23:27,086 - flask.app - ERROR - Exception on /cutuploads/ [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1835, in full_dispatch_request
    return self.finalize_request(rv)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1850, in finalize_request
    response = self.make_response(rv)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1976, in make_response
    'The view function did not return a valid response. The'
TypeError: The view function did not return a valid response. The function either returned None or ended without a return statement.
2019-06-28 15:39:45,694 - flask.app - ERROR - Exception on /cutuploads/ [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 88, in cutuploads
    print(file.read())
io.UnsupportedOperation: read
2019-06-28 16:53:17,330 - flask.app - ERROR - Exception on /time [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\release.py", line 96, in time_axis
    logs = [(datetime.date(l.create_time),l.title,l.id) for l in logs]
  File "D:\ABC\edit\app\web\release.py", line 96, in <listcomp>
    logs = [(datetime.date(l.create_time),l.title,l.id) for l in logs]
TypeError: an integer is required (got type datetime.datetime)
2019-06-28 17:22:46,648 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 24, in detail
    blog = Article.query.get_or_404(key)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask_sqlalchemy\__init__.py", line 422, in get_or_404
    rv = self.get(ident)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 959, in get
    return self._get_impl(ident, loading.load_on_pk_identity)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\query.py", line 1026, in _get_impl
    if len(primary_key_identity) != len(mapper.primary_key):
TypeError: object of type 'NoneType' has no len()
2019-06-28 17:53:57,448 - flask.app - ERROR - Exception on /next [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 116, in next
    return redirect(url_for('we.index'))
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\helpers.py", line 356, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2080, in handle_url_build_error
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\helpers.py", line 345, in url_for
    force_external=external)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\werkzeug\routing.py", line 2007, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.BuildError: Could not build url for endpoint 'we.index'. Did you mean 'web.index' instead?
2019-06-28 18:11:15,160 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 31, in detail
    reply_form=reply_form,pageinations=pageinations,comments=comments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% from 'macro/comment.html' import comment %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 162, in block "content"
    $("#next-article")[0].attr("href","{{ url_for('web.detail',id=detail.id) }}")
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'detail' is undefined
2019-06-28 18:13:21,331 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 31, in detail
    reply_form=reply_form,pageinations=pageinations,comments=comments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% from 'macro/comment.html' import comment %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 162, in block "content"
    $("#next-article")[0].attr("href","{{ url_for('web.detail',id=data.id) }}")
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'data' is undefined
2019-06-28 18:20:56,384 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 31, in detail
    reply_form=reply_form,pageinations=pageinations,comments=comments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% from 'macro/comment.html' import comment %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 162, in block "content"
    $("#next-article")[0].attr("href","{{ url_for('web.detail',id=data.id) }}")
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'data' is undefined
2019-06-28 18:37:14,549 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 31, in detail
    reply_form=reply_form,pageinations=pageinations,comments=comments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% from 'macro/comment.html' import comment %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 161, in block "content"
    {% set id=data.id %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'data' is undefined
2019-06-28 18:39:05,051 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 31, in detail
    reply_form=reply_form,pageinations=pageinations,comments=comments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% from 'macro/comment.html' import comment %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 161, in block "content"
    {% set id=data.id %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'data' is undefined
2019-06-28 18:39:11,821 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 31, in detail
    reply_form=reply_form,pageinations=pageinations,comments=comments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% from 'macro/comment.html' import comment %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 161, in block "content"
    {% set id=data.id %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'data' is undefined
2019-06-28 18:39:13,679 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 31, in detail
    reply_form=reply_form,pageinations=pageinations,comments=comments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% from 'macro/comment.html' import comment %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 161, in block "content"
    {% set id=data.id %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'data' is undefined
2019-06-28 18:39:14,159 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 31, in detail
    reply_form=reply_form,pageinations=pageinations,comments=comments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% from 'macro/comment.html' import comment %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 161, in block "content"
    {% set id=data.id %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'data' is undefined
2019-06-28 18:39:52,956 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 31, in detail
    reply_form=reply_form,pageinations=pageinations,comments=comments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% from 'macro/comment.html' import comment %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 161, in block "content"
    {% set id=data.id %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'data' is undefined
2019-06-28 18:40:10,373 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 31, in detail
    reply_form=reply_form,pageinations=pageinations,comments=comments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% from 'macro/comment.html' import comment %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 161, in block "content"
    {% set id=data.id %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'data' is undefined
2019-06-28 18:40:32,878 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 31, in detail
    reply_form=reply_form,pageinations=pageinations,comments=comments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% from 'macro/comment.html' import comment %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 177, in block "content"
    {% set id=data.id %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'data' is undefined
2019-06-28 18:40:49,430 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 31, in detail
    reply_form=reply_form,pageinations=pageinations,comments=comments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% from 'macro/comment.html' import comment %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 177, in block "content"
    {% set id=data.id %}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'data' is undefined
2019-06-28 18:53:43,919 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 31, in detail
    reply_form=reply_form,pageinations=pageinations,comments=comments)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\detail.html", line 3, in top-level template code
    {% from 'macro/comment.html' import comment %}
  File "D:\ABC\edit\app\templates\base.html", line 134, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\detail.html", line 162, in block "content"
    $("#next-article")[0].attr("href","{{ url_for('web.detail',id=data.id) }}")
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 430, in getattr
    return getattr(obj, attribute)
jinja2.exceptions.UndefinedError: 'data' is undefined
2019-06-28 19:55:19,779 - flask.app - ERROR - Exception on /detail [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 28, in detail
    last = Article.query.filter_by(select=blog.select).filter(blog.id>id).order_by(Article.id.asc()).first()
TypeError: '>' not supported between instances of 'int' and 'builtin_function_or_method'
2019-06-28 20:32:27,949 - flask.app - ERROR - Exception on /last [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 115, in last
    last_article = dict(url=url_for('web.detail',id=last.id), title=next.title,code=200)
AttributeError: 'function' object has no attribute 'title'
2019-06-28 20:32:35,282 - flask.app - ERROR - Exception on /last [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 115, in last
    last_article = dict(url=url_for('web.detail',id=last.id), title=next.title,code=200)
AttributeError: 'function' object has no attribute 'title'
2019-06-28 20:33:04,730 - flask.app - ERROR - Exception on /last [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 115, in last
    last_article = dict(url=url_for('web.detail',id=last.id), title=next.title,code=200)
AttributeError: 'function' object has no attribute 'title'
2019-06-28 21:19:10,353 - flask.app - ERROR - Exception on /next [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 125, in next
    next_article = Article.query.filter_by(select=select).filter(Article.id < id).order_by(Article.id.desc()).first()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\operators.py", line 346, in __lt__
    return self.operate(lt, other)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\attributes.py", line 211, in operate
    return op(self.comparator, *other, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\operators.py", line 346, in __lt__
    return self.operate(lt, other)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\properties.py", line 315, in operate
    return op(self.__clause_element__(), *other, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\operators.py", line 346, in __lt__
    return self.operate(lt, other)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\elements.py", line 727, in operate
    return op(self.comparator, *other, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\operators.py", line 346, in __lt__
    return self.operate(lt, other)
  File "<string>", line 1, in <lambda>
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\type_api.py", line 67, in operate
    return o[0](self.expr, op, *(other + o[1:]), **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\default_comparator.py", line 100, in _boolean_compare
    "Only '=', '!=', 'is_()', 'isnot()', "
sqlalchemy.exc.ArgumentError: Only '=', '!=', 'is_()', 'isnot()', 'is_distinct_from()', 'isnot_distinct_from()' operators can be used with None/True/False
2019-06-28 21:19:15,841 - flask.app - ERROR - Exception on /next [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 125, in next
    next_article = Article.query.filter_by(select=select).filter(Article.id < id).order_by(Article.id.desc()).first()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\operators.py", line 346, in __lt__
    return self.operate(lt, other)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\attributes.py", line 211, in operate
    return op(self.comparator, *other, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\operators.py", line 346, in __lt__
    return self.operate(lt, other)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\properties.py", line 315, in operate
    return op(self.__clause_element__(), *other, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\operators.py", line 346, in __lt__
    return self.operate(lt, other)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\elements.py", line 727, in operate
    return op(self.comparator, *other, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\operators.py", line 346, in __lt__
    return self.operate(lt, other)
  File "<string>", line 1, in <lambda>
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\type_api.py", line 67, in operate
    return o[0](self.expr, op, *(other + o[1:]), **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\default_comparator.py", line 100, in _boolean_compare
    "Only '=', '!=', 'is_()', 'isnot()', "
sqlalchemy.exc.ArgumentError: Only '=', '!=', 'is_()', 'isnot()', 'is_distinct_from()', 'isnot_distinct_from()' operators can be used with None/True/False
2019-06-28 21:19:26,269 - flask.app - ERROR - Exception on /next [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 125, in next
    next_article = Article.query.filter_by(select=select).filter(Article.id < id).order_by(Article.id.desc()).first()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\operators.py", line 346, in __lt__
    return self.operate(lt, other)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\attributes.py", line 211, in operate
    return op(self.comparator, *other, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\operators.py", line 346, in __lt__
    return self.operate(lt, other)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\orm\properties.py", line 315, in operate
    return op(self.__clause_element__(), *other, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\operators.py", line 346, in __lt__
    return self.operate(lt, other)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\elements.py", line 727, in operate
    return op(self.comparator, *other, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\operators.py", line 346, in __lt__
    return self.operate(lt, other)
  File "<string>", line 1, in <lambda>
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\type_api.py", line 67, in operate
    return o[0](self.expr, op, *(other + o[1:]), **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\sqlalchemy\sql\default_comparator.py", line 100, in _boolean_compare
    "Only '=', '!=', 'is_()', 'isnot()', "
sqlalchemy.exc.ArgumentError: Only '=', '!=', 'is_()', 'isnot()', 'is_distinct_from()', 'isnot_distinct_from()' operators can be used with None/True/False
2019-06-28 21:29:28,345 - flask.app - ERROR - Exception on /article/link [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 138, in link
    link_articles = Article.query.filter_by(select=select).filter_by(Article.id!=id).order_by(func.rand()).limit(10)
TypeError: filter_by() takes 1 positional argument but 2 were given
2019-06-28 21:29:54,774 - flask.app - ERROR - Exception on /article/link [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\comment.py", line 138, in link
    link_articles = Article.query.filter_by(select=select).filter_by(Article.id!=id).order_by(func.rand()).limit(10)
TypeError: filter_by() takes 1 positional argument but 2 were given
2019-07-01 15:12:33,197 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 18, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,paginations=paginations,flask_blogs=flask_blogs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 3, in top-level template code
    {% from  'macro/recommond.html' import showlist %}
  File "D:\ABC\edit\app\templates\base.html", line 137, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 46, in block "content"
    {{ showlist(blogs,current_user,paginations) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 30, in template
    <li class="timer">{{ moment(blog.create_time).fromNow(refresh=True) }}</li>
jinja2.exceptions.UndefinedError: 'moment' is undefined
2019-07-01 15:15:12,637 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 18, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,paginations=paginations,flask_blogs=flask_blogs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 3, in top-level template code
    {% from  'macro/recommond.html' import showlist %}
  File "D:\ABC\edit\app\templates\base.html", line 137, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 46, in block "content"
    {{ showlist(blogs,current_user,paginations) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 30, in template
    <li class="timer">{{ moment(blog.create_time).fromNow(refresh=True) }}</li>
jinja2.exceptions.UndefinedError: 'moment' is undefined
2019-07-01 15:25:37,087 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 18, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,paginations=paginations,flask_blogs=flask_blogs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 3, in top-level template code
    {% from  'macro/recommond.html' import showlist %}
  File "D:\ABC\edit\app\templates\base.html", line 137, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 46, in block "content"
    {{ showlist(blogs,current_user,paginations) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 30, in template
    <li class="timer">{{ moment(blog.create_time).fromNow(refresh=True) }}</li>
jinja2.exceptions.UndefinedError: 'moment' is undefined
2019-07-01 15:26:56,725 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 18, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,paginations=paginations,flask_blogs=flask_blogs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 3, in top-level template code
    {% from  'macro/recommond.html' import showlist %}
  File "D:\ABC\edit\app\templates\base.html", line 137, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 46, in block "content"
    {{ showlist(blogs,current_user,paginations) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 30, in template
    <li class="timer">{{ moment(blog.create_time).fromNow(refresh=True) }}</li>
jinja2.exceptions.UndefinedError: 'moment' is undefined
2019-07-01 15:27:57,243 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 18, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,paginations=paginations,flask_blogs=flask_blogs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 3, in top-level template code
    {% from  'macro/recommond.html' import showlist %}
  File "D:\ABC\edit\app\templates\base.html", line 137, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 46, in block "content"
    {{ showlist(blogs,current_user,paginations,moment) }}
TypeError: macro 'showlist' takes not more than 3 argument(s)
2019-07-01 15:28:42,996 - flask.app - ERROR - Exception on /web_frame/flask [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\blog_classes\frame.py", line 19, in web_flask
    return render_template('list.html', blogs=blogs, title=title,paginations=paginations)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\list.html", line 3, in top-level template code
    {% from  'macro/recommond.html' import showlist %}
  File "D:\ABC\edit\app\templates\base.html", line 137, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\list.html", line 17, in block "content"
    {{ showlist(blogs,current_user,paginations) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 30, in template
    <li class="timer">{{ moment(blog.create_time).fromNow(refresh=True) }}</li>
jinja2.exceptions.UndefinedError: parameter 'moment' was not provided
2019-07-01 15:38:08,447 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 18, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,paginations=paginations,flask_blogs=flask_blogs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 3, in top-level template code
    {% from  'macro/recommond.html' import showlist %}
  File "D:\ABC\edit\app\templates\base.html", line 137, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 46, in block "content"
    {{ showlist(blogs,current_user,paginations,moment) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 31, in template
    <li class="view"><span>{{ random(range(1000)) }}</span>已阅读</li>
jinja2.exceptions.UndefinedError: 'random' is undefined
2019-07-01 15:38:39,431 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 18, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,paginations=paginations,flask_blogs=flask_blogs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 3, in top-level template code
    {% from  'macro/recommond.html' import showlist %}
  File "D:\ABC\edit\app\templates\base.html", line 137, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 46, in block "content"
    {{ showlist(blogs,current_user,paginations,moment,random) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 31, in template
    <li class="view"><span>{{ random(range(1000)) }}</span>已阅读</li>
jinja2.exceptions.UndefinedError: 'random' is undefined
2019-07-01 15:39:20,933 - flask.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 2311, in wsgi_app
    response = self.full_dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1834, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1737, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\_compat.py", line 36, in reraise
    raise value
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1832, in full_dispatch_request
    rv = self.dispatch_request()
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\app.py", line 1818, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "D:\ABC\edit\app\web\index.py", line 18, in index
    return render_template('index.html',recommend=recommend,blogs=blogs,paginations=paginations,flask_blogs=flask_blogs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 135, in render_template
    context, ctx.app)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\flask\templating.py", line 117, in _render
    rv = template.render(context)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "D:\ABC\edit\app\templates\index.html", line 3, in top-level template code
    {% from  'macro/recommond.html' import showlist %}
  File "D:\ABC\edit\app\templates\base.html", line 137, in top-level template code
    {% block content %}{% endblock %}
  File "D:\ABC\edit\app\templates\index.html", line 46, in block "content"
    {{ showlist(blogs,current_user,paginations,moment,random) }}
  File "D:\ABC\virtu-manage\blog\lib\site-packages\jinja2\runtime.py", line 579, in _invoke
    rv = self._func(*arguments)
  File "D:\ABC\edit\app\templates\macro\recommond.html", line 31, in template
    <li class="view"><span>{{ random(range(1000)) }}</span>已阅读</li>
jinja2.exceptions.UndefinedError: 'random' is undefined
